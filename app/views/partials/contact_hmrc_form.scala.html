@*
 * Copyright 2021 HM Revenue & Customs
 *
 *@

@import uk.gov.hmrc.play.views.html.helpers._

@this()

@(contactForm: Form[controllers.ContactForm],
  externalContactHmrcUrl: String,
  renderFormOnly: Boolean = false,
  reCaptchaComponent: Option[Html] = None)(implicit request: Request[_], lang : Lang, messages : Messages)

@if(!renderFormOnly) {
    <header class="page-header">
        <h1>@Messages("contact.heading")</h1>
    </header>
    <p>@Html(Messages("contact.form.specific.query", uk.gov.hmrc.urls.Link.toExternalPage(url = "http://search2.hmrc.gov.uk/kb5/hmrc/contactus/home.page", value = Some("contact HMRC"), dataAttributes = Some(Map
            ("journey-click" -> "contact-page:Click:Contact HMRC"))).toHtml))</p>
    <p>@Messages("contact.form.please.fill")</p>

    <h2>@Messages("contact.form.how.help")</h2>
    <p>@Messages("common.feedback.information.warning")</p>
}

<form action="@externalContactHmrcUrl" method="POST" class="form--feedback" novalidate="novalidate">
    <input type="hidden" name="csrfToken" value="@contactForm("csrfToken").value"/>

    <input type="hidden" name="service" id="service" value="@contactForm("service").value"/>

    <fieldset>
        @input_text(
            contactForm("contact-name"),
            label = Messages("form.your.name"),
            inputClass = Some("form-control-3-4")
        )

        @input_text(
            contactForm("contact-email"),
            label =  Messages("form.email.address"),
            inputClass = Some("form-control-3-4"),
            inputType = Some("email")
        )

        @input_textarea(
            field = contactForm("contact-comments"),
            label = Messages("form.your.comments"),
            charLimit = Some(2000)
        )

        <input type="hidden" name="isJavascript" id="isJavascript" value="@contactForm.data.get("isJavascript")">
        <input type="hidden" name="referrer" id="referrer" value="@contactForm.data.get("referrer")">
        <input type="hidden" name="userAction" id="userAction" value="@contactForm("userAction").value" />

        @reCaptchaComponent.map { component => @component }

        <div class="form-field">
            <button class="button" type="submit">@Messages("form.send")</button>
        </div>

    </fieldset>
</form>