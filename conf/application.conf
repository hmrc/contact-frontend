include "frontend.conf"


appName = "contact-frontend"

# An ApplicationLoader that uses Guice to bootstrap the application.
play.application.loader = "uk.gov.hmrc.play.bootstrap.ApplicationLoader"

# Primary entry point for all HTTP requests on Play applications
play.http.requestHandler = "uk.gov.hmrc.play.bootstrap.http.RequestHandler"

# Provides an implementation of AuditConnector. Use `uk.gov.hmrc.play.bootstrap.AuditModule` or create your own.
# An audit connector must be provided.
play.modules.enabled += "uk.gov.hmrc.play.bootstrap.AuditModule"

# Provides an implementation of MetricsFilter. Use `uk.gov.hmrc.play.graphite.GraphiteMetricsModule` or create your own.
# A metric filter must be provided
play.modules.enabled += "uk.gov.hmrc.play.bootstrap.graphite.GraphiteMetricsModule"

play.modules.enabled += "uk.gov.hmrc.play.bootstrap.HttpClientModule"

play.modules.enabled += "uk.gov.hmrc.play.bootstrap.AuthModule"

# Provides an implementation and configures all filters required by a Platform frontend microservice.
play.modules.enabled += "uk.gov.hmrc.play.bootstrap.FrontendModule"

play.modules.enabled += "config.ContactFrontendModule"
play.http.errorHandler = "config.ContactFrontendErrorHandler"

play.http.filters = "config.ContactFrontendFilters"


play.filters.csrf.header.bypassHeaders {
  X-Requested-With = "*"
  Csrf-Token = "nocheck"
}

play.http.router = prod.Routes

play.i18n.langs = ["en", "cy"]

play.filters.headers.contentSecurityPolicy = "default-src 'self' 'unsafe-inline' localhost:9032 www.google-analytics.com data:"

frontend.assets.version = "2.254.0"

assets {
  version = ${?frontend.assets.version}
  url = "http://localhost:9032/assets/"
  minified = true
}

metrics {
  name = ${appName}
  rateUnit = SECONDS
  durationUnit = SECONDS
  showSamples = true
  jvm = true
  enabled = false
}


controllers {
  controllers.ProblemReportsController {
    needsAuth = false
  }

  controllers.PartialsController {
    needsAuth = false
  }

  controllers.ApplicationController = {
    needsAuth = false
  }
}


Dev{
  auditing {
    enabled=true
    traceRequests=true
    consumer {
      baseUri {
        host = localhost
        port = 8100
      }
    }
  }
  backUrlDestinationWhitelist="http://localhost:9000"
}
Prod {
  auditing {
    enabled = true
    traceRequests = true
    consumer {
      baseUri {
        host = datastream.protected.mdtp
        port = 80
      }
    }
  }

  microservice {
    metrics {
      graphite {
        host = graphite
        port = 2003
        prefix = play.${appName}.
        enabled = true
      }
    }
  }
  backUrlDestinationWhitelist="http://www.tax.service.gov.uk,https://www.tax.service.gov.uk,http://ewf.companieshouse.gov.uk,https://ewf.companieshouse.gov.uk"
}

Test {

  auditing {
    enabled = true
    traceRequests = true
    consumer {
      baseUri {
        host = "localhost"
        port = 11111
      }
    }
  }
  backUrlDestinationWhitelist="http://localhost:9000"
}

govuk-tax {

  Test {
    enableLanguageSwitching = true

    google-analytics {
      token=N/A
      host=auto
    }

    services {
      auth {
        host = "localhost"
        port = 11112
      }
      hmrc-deskpro {
        host = "localhost"
        port = 11113
      }
    }

    company-auth.host="http://localhost:11112"

    contact-frontend.host = "http://localhost:19001"

    google-analytics {
      host = "service.gov.uk"
      token = ""
    }

    platform.frontend.url="http://tax.service.gov.uk"
  }

  Dev {
    enableLanguageSwitching = true

    google-analytics {
      token=N/A
      host=auto
    }

    services {
      auth {
        host=localhost
        port=8500
      }

      hmrc-deskpro {
        host=localhost
        port=8650
      }

    }

    company-auth.host="http://localhost:9025"
    contact-frontend.host = "http://localhost:9250"

    platform.frontend.url="http://tax.service.gov.uk"
  }

  Prod {
    enableLanguageSwitching = true

    google-analytics {
      token=N/A
      host=auto
    }

    services {
      auth {
        host=auth.protected.mdtp
        port=80
      }

      hmrc-deskpro {
        host=hmrc-deskpro.public.mdtp
        port=80
      }
    }

    platform.frontend.url="http://tax.service.gov.uk"
  }
}
